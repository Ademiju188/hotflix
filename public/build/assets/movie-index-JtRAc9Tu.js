import{r as d,S as n,j as e,L as p,$ as o}from"./app-DbHrDmZi.js";import{A as _}from"./app-layout-D5cqPElu.js";import{P as g}from"./pagination-D7mRgVEV.js";import{l as N}from"./lodash-CH9d8Xn8.js";import"./clsx-B-dksMZM.js";const T=({movies:l})=>{const[r,h]=d.useState(""),[c,x]=d.useState(),i=N.debounce(t=>{n.get(route("system.movie.index"),{search:t},{preserveState:!0,replace:!0,only:["movies"]})},300);d.useEffect(()=>{const t=r.trim();return t?i(t):l.data.length===0&&n.get(route("system.movie.index"),{},{preserveState:!0,replace:!0,only:["movies"]}),()=>{i.cancel&&i.cancel()}},[r]);const m=async t=>{if(!confirm(`Are you sure you want to delete "${t.title}"? This action cannot be undone.`)||!confirm(`WARNING: This will permanently delete all episodes and associated files for "${t.title}".

Type "DELETE" to confirm:`))return;if(prompt(`Please type "DELETE ${t.title}" to confirm permanent deletion:`)!==`DELETE ${t.title}`){alert("Deletion cancelled. The series was NOT deleted.");return}try{await n.delete(route("system.movie.destroy",t.id),{preserveScroll:!0,onSuccess:()=>{l.data.map(a=>a.id===t.id?{...a,active:!a.active}:a),console.log(`"${t.title}" has been permanently deleted`)},onError:a=>{console.error(`Failed to delete "${t.title}": ${a.message||"Unknown error"}`)}})}catch(a){console.error("Delete error:",a)}},j=t=>{x(t)},u=async t=>{if(confirm(`Are you sure you want to ${t.active?"disable":"enable"} this series?`))try{await n.put(route("system.movie.status",t.id),{preserveScroll:!0}),l.data.map(s=>s.id===t.id?{...s,active:!s.active}:s)}catch(s){console.error(`Failed to ${t.active?"disable":"enable"} series:`,s)}};return e.jsxs(e.Fragment,{children:[e.jsx(p,{title:"Manage Category"}),e.jsx(_,{title:"Manage Category",mainTitle:!1,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"main__title",children:[e.jsx("h2",{children:"Manage Movies"}),e.jsxs("span",{className:"main__title-stat",children:[l.data.length," Total"]}),e.jsxs("div",{className:"main__title-wrap",children:[e.jsx(o,{href:route("system.movie.create"),type:"button",className:"main__title-link main__title-link--wrap",children:"Add Movie"}),e.jsxs("form",{onSubmit:t=>i,className:"main__title-form",children:[e.jsx("input",{type:"text",placeholder:"Find Movie..",value:r,onChange:t=>h(t.target.value)}),e.jsx("button",{type:"submit",disabled:!r.trim(),children:e.jsx("i",{className:"ti ti-search"})})]})]})]})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"catalog catalog--1",children:e.jsxs("table",{className:"catalog__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SN"}),e.jsx("th",{children:"TITLE"}),e.jsx("th",{children:"DESCRIPTION"}),e.jsx("th",{children:"EPISODES"}),e.jsx("th",{children:"STATUS"}),e.jsx("th",{children:"CREATED DATE"}),e.jsx("th",{children:"ACTIONS"})]})}),e.jsx("tbody",{children:l.data.length>0?l.data.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"catalog__text",children:++s})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-item-center",children:[e.jsx("div",{children:e.jsx("img",{src:`/storage/${t.banner_path}`,width:50,className:"me-2",alt:""})}),e.jsx("div",{className:"catalog__text",children:t.title})]})}),e.jsx("td",{children:e.jsx("div",{className:"catalog__text",children:e.jsx("span",{style:{cursor:"pointer"},"data-bs-target":"#model-description",onClick:a=>j(t),"data-bs-toggle":"modal",children:"Preview Description"})})}),e.jsx("td",{children:e.jsx("div",{className:"catalog__text",children:t.episodes_count})}),e.jsx("td",{children:e.jsx("div",{className:`catalog__text catalog__text--${t.active?"green":"red"}`,style:{cursor:"pointer"},onClick:a=>u(t),children:t.active?"Active":"In-Active"})}),e.jsx("td",{children:e.jsx("div",{className:"catalog__text",children:t.created_at})}),e.jsx("td",{children:e.jsxs("div",{className:"catalog__btns",children:[e.jsx(o,{className:"catalog__btn catalog__btn--edit",href:route("system.movie.edit",t.uuid),children:e.jsx("i",{className:"ti ti-edit"})}),e.jsx("button",{type:"button",className:"catalog__btn catalog__btn--delete",onClick:a=>m(t),children:e.jsx("i",{className:"ti ti-trash"})})]})})]},t.id.toString())):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:e.jsx("div",{className:"catalog__text text-center",children:"No Records Found!"})})})})]})})}),e.jsx("div",{className:"modal fade",id:"model-description",tabIndex:"-1","aria-labelledby":"#model-description","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsx("div",{className:"modal-content",children:e.jsx("div",{className:"modal__content catalog__text",children:e.jsx("h6",{children:c==null?void 0:c.description})})})})}),e.jsx(g,{links:l.meta.links,meta:l.meta})]})})]})};export{T as default};
