import{r as i,j as e,$ as v,K as y}from"./app-BS6cv_Wc.js";import{y as j,L as $}from"./ReactToastify-DVt3X755.js";import{u as S}from"./useDynamicCss-3Y8c1bj2.js";const A=i.forwardRef(({sidebarActive:l,toggleSidebar:o},x)=>{const[m,r]=i.useState(!1);return i.useEffect(()=>{const c=window.matchMedia("(min-width: 1200px)"),t=u=>{r(u.matches)};return t(c),c.addEventListener("change",t),()=>c.removeEventListener("change",t)},[]),e.jsx("header",{className:"header",style:{display:m?"none":"block"},children:e.jsxs("div",{className:"header__content",children:[e.jsx(v,{href:"/",className:"header__logo",children:e.jsx("img",{src:"/assets/backend/img/logo.png",alt:"Admin Logo"})}),e.jsxs("button",{ref:x,className:`header__btn ${l?"header__btn--active":""}`,type:"button",onClick:o,"aria-label":"Toggle sidebar","aria-expanded":l,children:[e.jsx("span",{}),e.jsx("span",{}),e.jsx("span",{})]})]})})}),w=i.forwardRef(({sidebarActive:l,user:o},x)=>{var u;const m=(u=y().props.ziggy)==null?void 0:u.currentRoute,r=[{title:"Dashboard",route:"system.dashboard",icon:"ti ti-layout-grid",activeRoutes:["system.dashboard"]},{title:"Categories",route:"system.category.index",icon:"ti ti-category",activeRoutes:["system.category.index"]},{title:"Pricing",route:"system.pricing.index",icon:"ti ti-cash",activeRoutes:["system.pricing.index"]},{title:"Movies",route:"system.categories.index",icon:"ti ti-movie",activeRoutes:["system.movie.*"],subLinks:[{title:"Add Movie",route:"system.movie.create",icon:"ti ti-plus"},{title:"Manage Movies",route:"system.movie.index",icon:"ti ti-list"}]},{title:"Users",route:"system.user.index",icon:"ti ti-users",activeRoutes:["system.user.index"]},{title:"Settings",route:"system.settings.hero-slider.index",icon:"ti ti-settings",activeRoutes:["system.settings.hero-slider.index"],subLinks:[{title:"Hero Slider",route:"system.settings.hero-slider.index",icon:"ti ti-movie"}]}],c=(a=[])=>!m||!(a!=null&&a.length)?!1:a.some(s=>{if(s.endsWith(".*")){const b=s.replace(".*","");return m.startsWith(b)}return m===s}),t=a=>a.map((s,b)=>e.jsx("li",{className:"sidebar__nav-item",children:s.subLinks?e.jsxs(e.Fragment,{children:[e.jsxs("a",{className:`sidebar__nav-link ${c(s.activeRoutes)?"sidebar__nav-link--active":""}`,href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:s.icon}),e.jsx("span",{children:s.title}),e.jsx("i",{className:"ti ti-chevron-down"})]}),e.jsx("ul",{className:"dropdown-menu sidebar__dropdown-menu",children:s.subLinks.map((f,_)=>e.jsx("li",{className:`${c(s.activeRoutes)?"sidebar__nav-link--active":""}`,children:e.jsx(v,{href:route(f.route),children:f.title})},_))})]}):e.jsxs(v,{href:route(s.route),className:`sidebar__nav-link ${c(s.activeRoutes)?"sidebar__nav-link--active":""}`,children:[e.jsx("i",{className:s.icon}),e.jsx("span",{children:s.title})]})},b));return e.jsxs("div",{ref:x,className:`sidebar ${l?"sidebar--active":""}`,children:[e.jsx(v,{href:"/",className:"sidebar__logo",children:e.jsx("img",{src:"/assets/backend/img/logo.png",alt:"Admin Logo",width:"120",height:"40",loading:"lazy"})}),e.jsxs("div",{className:"sidebar__user",children:[e.jsx("div",{className:"sidebar__user-img",children:e.jsx("img",{src:o.avatar||"/assets/backend/img/user.svg",alt:`${o.name}'s profile`,width:"40",height:"40",loading:"lazy"})}),e.jsxs("div",{className:"sidebar__user-title",children:[e.jsx("span",{className:"sidebar__user-role",children:o.role.name}),e.jsx("p",{className:"sidebar__user-name",children:o.name})]}),e.jsx(v,{href:route("logout"),method:"post",as:"button",className:"sidebar__user-btn","aria-label":"Logout",children:e.jsx("i",{className:"ti ti-logout"})})]}),e.jsx("div",{className:"sidebar__nav-wrap",children:e.jsx("ul",{className:"sidebar__nav",children:t(r)})}),e.jsxs("div",{className:"sidebar__copyright",children:["© ","Reels Binge",", 2025—",new Date().getFullYear(),"."]})]})});w.displayName="AdminSidebarLayout";const H=({children:l,title:o,mainTitle:x=!0})=>{const{props:m}=y(),{auth:r,message:c}=m;S("/assets/backend/css/admin.css");const[t,u]=i.useState(!1),a=i.useRef(null),s=i.useRef(null),[b,f]=i.useState(x),_=()=>u(h=>!h),N=()=>u(!1),{flash:n,errors:g}=y().props;i.useEffect(()=>{var h,p;(h=n==null?void 0:n.message)!=null&&h.success&&j.success(n.message.success),(p=n==null?void 0:n.message)!=null&&p.error&&j.error(n.message.error),g&&Object.keys(g).length>0&&(g.message&&j.error(g.message),Object.entries(g).forEach(([d,R])=>{if(d!=="message"){const E=d.replace(/_/g," ").replace(/\b\w/g,k=>k.toUpperCase());j.error(`${E}: ${R}`,{toastId:`validation-error-${d}`})}}))},[n,g]),i.useEffect(()=>{const h=d=>{t&&a.current&&!a.current.contains(d.target)&&s.current&&!s.current.contains(d.target)&&N()},p=d=>{d.key==="Escape"&&N()};return document.addEventListener("mousedown",h),document.addEventListener("keydown",p),()=>{document.removeEventListener("mousedown",h),document.removeEventListener("keydown",p)}},[t]);const L=()=>{if(!(r!=null&&r.user))return null;switch(r.user.role.id){case 1:return e.jsx(w,{sidebarActive:t,ref:a,user:r.user});default:return null}};return e.jsxs(e.Fragment,{children:[e.jsx($,{position:"top-right",autoClose:9e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"}),e.jsx(A,{sidebarActive:t,toggleSidebar:_,ref:s}),L(),e.jsx("div",{className:`main-content ${t?"main-content--shifted":""}`,children:b?e.jsx("main",{className:"main",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"main__title",children:e.jsx("h2",{children:o})})}),l]})})}):e.jsx("main",{className:"main",children:e.jsx("div",{className:"container-fluid",children:l})})})]})};export{H as A};
