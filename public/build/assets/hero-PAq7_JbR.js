import{r as i,m as A,S as R,j as e,L as k}from"./app-BS6cv_Wc.js";import{I as L}from"./input-error-CEjlMKIS.js";import{A as M}from"./app-layout-DbgSLFnR.js";import{S as T}from"./slimselect-wN7lXC_P.js";import{u as H,a as g,D as K,c as O,S as B,v as F,b as P,d as G,s as U,K as $,P as q}from"./SortableItem-lMTJl65Q.js";import{l as J}from"./lodash-_SYO2LJj.js";import{L as Q}from"./loader-circle-CewO-iXb.js";import"./ReactToastify-DVt3X755.js";import"./clsx-B-dksMZM.js";import"./useDynamicCss-3Y8c1bj2.js";import"./index-CGaQUzSE.js";import"./createLucideIcon-cEInIR7a.js";const de=({heroSliders:n,movies:p})=>{const c=i.useRef(null),[m,v]=i.useState(!1),[r,h]=i.useState(n.data),[x,N]=i.useState(n.data.map(s=>s.movie_id).filter(s=>s!==void 0)),{setData:_,processing:d,post:j,errors:S,reset:b}=A({series:x}),f=async s=>{s.preventDefault(),j(route("system.settings.hero-slider.store"),{onSuccess:()=>E()})};i.useEffect(()=>{if(c.current){const s=new T({select:c.current,settings:{showSearch:!0,placeholderText:"Select Series",closeOnSelect:!1},events:{afterChange:t=>{const a=t.map(l=>parseInt(l.value));N(a),_("series",a)}}});return()=>{s.destroy()}}},[c.current]),i.useEffect(()=>{h([...n.data].sort((s,t)=>s.hierarchy-t.hierarchy))},[n.data]);const y=H(g(q),g($,{coordinateGetter:U})),w=s=>{const{active:t,over:a}=s;t.id!==(a==null?void 0:a.id)&&h(l=>{const C=l.findIndex(o=>o.id===t.id),D=l.findIndex(o=>o.id===(a==null?void 0:a.id)),u=G(l,C,D);return I(u),u})},I=J.throttle(s=>{const t=s.map((a,l)=>({id:a.id,hierarchy:l+1}));R.post(route("system.settings.hero-slider.reorder"),{sliders:t},{preserveScroll:!0})},1e3),E=()=>{const s=document.getElementById("model-hero-slider");if(s){const t=bootstrap.Modal.getInstance(s);t==null||t.hide()}b()},z=s=>{confirm("Are you sure you want to delete this slider?")&&j(route("system.settings.hero-slider.destroy",s.id),{preserveScroll:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Settings :: Hero Sliders"}),e.jsx(M,{title:"Hero Sliders",mainTitle:!1,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"main__title",children:[e.jsx("h2",{children:"Hero Sliders"}),e.jsxs("span",{className:"main__title-stat",children:["Total ",r.length]}),e.jsxs("div",{className:"main__title-wrap",children:[e.jsx("button",{type:"button","data-bs-toggle":"modal",className:"main__title-link main__title-link--wrap","data-bs-target":"#model-hero-slider",children:"Add Slider"}),r.length>0&&e.jsx("button",{type:"button",className:"main__title-link main__title-link--wrap",onClick:()=>v(!m),children:"Reorder Sliders"})]})]})}),m?e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"catalog catalog--1",children:e.jsxs("div",{className:`relative ${d?"opacity-75":""}`,children:[d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),e.jsx(K,{sensors:y,collisionDetection:O,onDragEnd:w,children:e.jsx(B,{items:r,strategy:F,children:e.jsx("div",{className:"row mt-4",children:r.map(s=>{var t;return e.jsx(P,{id:s.id,children:e.jsx("div",{className:"col-12 mb-4",children:e.jsx("div",{className:"card h-100 shadow-sm bg-dark text-white  hover-shadow",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",className:"me-2",fill:"currentColor",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})}),e.jsx("h5",{className:"text-truncate mt-0 mb-0",children:((t=s.movie)==null?void 0:t.title)||"Untitled Movie"})]})})})})})},s.id)})})})})]})})}):e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"catalog catalog--1",children:e.jsxs("table",{className:"catalog__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"SN"}),e.jsx("th",{children:"SERIES"}),e.jsx("th",{children:"CREATED DATE"}),e.jsx("th",{children:"ACTIONS"})]})}),e.jsx("tbody",{children:r.length>0?r.map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("div",{className:"catalog__text",children:++t})}),e.jsx("td",{children:e.jsx("div",{className:"catalog__text",children:s.movie.title})}),e.jsxs("td",{children:[e.jsx("div",{className:"catalog__text",children:s.created_at}),"    "]}),e.jsx("td",{children:e.jsx("div",{className:"catalog__btns",children:e.jsx("button",{type:"button",className:"catalog__btn catalog__btn--delete",onClick:a=>z(s),children:e.jsx("i",{className:"ti ti-trash"})})})})]},s.id.toString())):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:e.jsx("div",{className:"catalog__text text-center",children:"No Records Found!"})})})})]})})})]})}),e.jsx("div",{className:"modal fade",id:"model-hero-slider","aria-labelledby":"model-hero-slider","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsx("div",{className:"modal-content",children:e.jsx("div",{className:"modal__content",children:e.jsxs("form",{onSubmit:f,className:"",children:[e.jsx("p",{className:"modal__title mb-4",children:"Add Series to Hero Sliders"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 w-100",children:e.jsxs("div",{className:"sign__group",children:[e.jsx("select",{className:"sign__selectjs",id:"sign__genre",ref:c,multiple:!0,children:p.data.map(s=>e.jsx("option",{value:s.id,selected:x.includes(s.id),children:s.title},s.id))}),e.jsx(L,{message:S.series})]})}),e.jsx("div",{className:"col-12 col-lg-6 offset-lg-3",children:e.jsxs("button",{type:"submit",className:"sign__btn sign__btn--modal",disabled:d,children:[d&&e.jsx(Q,{className:"h-6 w-4 mr-2 animate-spin"}),d?"Saving...":"Save"]})})]})]})})})})})]})};export{de as default};
